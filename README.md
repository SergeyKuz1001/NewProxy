# NewProxy

NewProxy - библиотека для создания простых прокси-серверов.

## Описание

Данная библиотека написана для использования в среде Linux.

Прокси-сервер, основанный на данной библиотеке, умеет:

* Принимать входящие подключения
* Подключаться к какому-либо серверу
* Обрабатывать событие потери подключения
* Принимать и отправлять незашифрованные сообщения, передающиеся на базе протокола TCP/IP

Далее я буду использовать слово "клиент" для обозначения любой программы, связанной с прокси-сервером через TCP-сокет.

Логика работы прокси-сервера разбита на 5 основных блоков:

* Init (запуск прокси-сервера)
* Connecting (подключение клиента к прокси-серверу)
* Disconnecting (потеря соединения с клиентом)
* Messaging (передача сообщения от клиента)
* Finish (действия при непредвиденной ошибке)

Работа прокси-сервера описывается следующей блок-схемой:
![](https://raw.githubusercontent.com/SergeyKuz1001/NewProxy/4818c2d6f0f7aaf074e55cf5682b94a50b21dbc6/architecture.png)

Как видно, архитектура достаточно проста и абстрактна для прокси-сервера. Вся основная логика работы прокси-сервера
определяется через определение основных блоков.

## Использование

Для сборки прокси-сервера необходимо написать свой `user_funcs.c`. При написании желательно пользоваться дополнительными
вспомогательными функциями, объявленными в файлах `proxy_funcs.h` и `proxy_trace.h`.

Примеры файлов `user_funcs.c` можно посмотреть в папке `examples/`.

При отсутствии файла `user_funcs.c` при сборке будет взят файл `examples/user_funcs_id.c`.
