# NewProxy

NewProxy - утилита для создания простых прокси-серверов.

## Описание

Данная утилита написана для использования в среде Linux.

Создаваемый ею прокси-сервер умеет:

* Принимать входящие подключения
* Подключаться к какому-либо серверу
* Обрабатывать событие потери подключения
* Принимать и отправлять незашифрованные сообщения, передающиеся на базе протокола TCP/IP

Далее я буду использовать слово "клиент" для обозначения любой программы, связанной с прокси-сервером через TCP-сокет.

Логика работы прокси-сервера, создаваемого данной утилитой, разбита на 5 основных блоков:

* Init (запуск прокси-сервера)
* Connecting (подключение клиента к прокси-серверу)
* Disconnecting (потеря соединения с клиентом)
* Messaging (передача сообщения от клиента)
* Finish (действия при непредвиденной ошибке)

Работа прокси-сервера описывается следующей блок-схемой:
![](https://raw.githubusercontent.com/SergeyKuz1001/NewProxy/5e5255660f673f226fb63bead6c4a4b8fde22a66/architecture.png)

Как видно, архитектура достаточно проста и абстрактна для прокси-сервера. Вся основная логика работы прокси-сервера
определяется через определение основных блоков.

## Использование

Для создания прокси-сервера с помощью данной утилиты необходимо:

1. Создать файл на языке C или C++, который содержит описание 5 основных блоков, а именно надо реализовать 5 основных функций,
   прототипы которых можно найти в файле `user_funcs.h` (примеры, написанные в папке `examples`, разрабатывались для работы
   с определённым приложением и могут не подойти для решения каких-либо других задач)
2. Определиться, какой порт должен прослушивать создаваемый прокси-сервер
3. Запустить `newproxy -s `файл из пункта 1` -p `порт из пункта 2 (если файл из пункта 1 написан на C, то дополнительно
   используйте опцию `-c`)

Для просмотра информации о всех доступных опциях утилиты запустите `newproxy` или `newproxy -?`.
